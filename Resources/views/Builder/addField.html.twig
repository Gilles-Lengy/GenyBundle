{# GenyBundle:Builder:addField.html.twig #}

{%
    set ajax = {
        'class': 'domajax change',
        'data-endpoint': path('geny_builder_add_field', {id: id}),
        'data-input': '#geny-add-field-' ~ id,
        'data-output-json': 'add-field fields',
        'data-json-add-field': '#geny-add-field-' ~ id,
        'data-json-fields': '#geny-fields-' ~ id,
        'data-script-before': 'if ($("#' ~ form.type.vars.id ~'").val() === "") return false;',
        'data-callback-success': '$.geny.initCollections',
    }
%}

{{ form_start(form) }}

{{
    form_row(form.type, {
        value: '',
        attr: form.type.vars.attr|merge(ajax)|merge({autocomplete: 'off'})
    })
}}

{{ form_end(form) }}
